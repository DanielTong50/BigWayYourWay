import{s as Me,n as ke,r as Ve,a as Be,o as Ae}from"../chunks/C3mXhKtC.js";import{S as Je,i as ze,d as P,s as re,k as D,l as De,a as _e,b as e,m as oe,n as o,c as n,e as O,o as x,g as N,f as X,h as a,j as E,t as Z,p as He}from"../chunks/CeLBSusy.js";function Se(s){let t,l,_="Successfully joined the waitlist!",v,r,p,y;return{c(){t=a("div"),l=a("p"),l.textContent=_,v=E(),r=a("p"),p=Z("Your position in line: "),y=Z(s[7]),this.h()},l(d){t=n(d,"DIV",{class:!0});var m=O(t);l=n(m,"P",{"data-svelte-h":!0}),x(l)!=="svelte-152sscl"&&(l.textContent=_),v=N(m),r=n(m,"P",{});var T=O(r);p=X(T,"Your position in line: "),y=X(T,s[7]),T.forEach(P),m.forEach(P),this.h()},h(){o(t,"class","success-message svelte-9p6x64")},m(d,m){_e(d,t,m),e(t,l),e(t,v),e(t,r),e(r,p),e(r,y)},p(d,m){m&128&&re(y,d[7])},d(d){d&&P(t)}}}function qe(s){let t,l,_;return{c(){t=a("div"),l=a("p"),_=Z(s[5]),this.h()},l(v){t=n(v,"DIV",{class:!0});var r=O(t);l=n(r,"P",{});var p=O(l);_=X(p,s[5]),p.forEach(P),r.forEach(P),this.h()},h(){o(t,"class","error-message svelte-9p6x64")},m(v,r){_e(v,t,r),e(t,l),e(l,_)},p(v,r){r&32&&re(_,v[5])},d(v){v&&P(t)}}}function Ue(s){let t,l,_='<h1 class="svelte-9p6x64">Big Way Your Way<br/>(UBC)</h1>',v,r,p,y,d,m,T,$,F,h,w,L,S="Name*",g,f,ie,j,Y,me="Mobile Number*",ue,I,pe,R,Ce="Enter a 10-digit phone number",fe,G,Q,be="Party Size*",ce,c,q,Pe="Party of 1",M,xe="Party of 2",V,Ie="Party of 3",B,ge="Party of 4",A,Ne="Party of 5",J,Ee="Party of 6",z,Oe="Party of 7",H,ye="Party of 8",ve,U,te=s[4]?"JOINING...":"JOIN THE LINE NOW",le,de,K,Te="This is a beta testing model step 1 out of 5",he,we,C=s[6]&&Se(s),b=s[5]&&qe(s);return{c(){t=a("main"),l=a("div"),l.innerHTML=_,v=E(),r=a("div"),p=a("p"),y=Z("There are currently "),d=Z(s[1]),m=Z(" parties in line"),T=E(),C&&C.c(),$=E(),b&&b.c(),F=E(),h=a("form"),w=a("div"),L=a("label"),L.textContent=S,g=E(),f=a("input"),ie=E(),j=a("div"),Y=a("label"),Y.textContent=me,ue=E(),I=a("input"),pe=E(),R=a("small"),R.textContent=Ce,fe=E(),G=a("div"),Q=a("label"),Q.textContent=be,ce=E(),c=a("select"),q=a("option"),q.textContent=Pe,M=a("option"),M.textContent=xe,V=a("option"),V.textContent=Ie,B=a("option"),B.textContent=ge,A=a("option"),A.textContent=Ne,J=a("option"),J.textContent=Ee,z=a("option"),z.textContent=Oe,H=a("option"),H.textContent=ye,ve=E(),U=a("button"),le=Z(te),de=E(),K=a("p"),K.textContent=Te,this.h()},l(u){t=n(u,"MAIN",{class:!0});var i=O(t);l=n(i,"DIV",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-ef0wlu"&&(l.innerHTML=_),v=N(i),r=n(i,"DIV",{class:!0});var Le=O(r);p=n(Le,"P",{});var se=O(p);y=X(se,"There are currently "),d=X(se,s[1]),m=X(se," parties in line"),se.forEach(P),Le.forEach(P),T=N(i),C&&C.l(i),$=N(i),b&&b.l(i),F=N(i),h=n(i,"FORM",{class:!0});var k=O(h);w=n(k,"DIV",{class:!0});var ne=O(w);L=n(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(L)!=="svelte-1818dak"&&(L.textContent=S),g=N(ne),f=n(ne,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),ne.forEach(P),ie=N(k),j=n(k,"DIV",{class:!0});var ee=O(j);Y=n(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(Y)!=="svelte-28krx7"&&(Y.textContent=me),ue=N(ee),I=n(ee,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),pe=N(ee),R=n(ee,"SMALL",{class:!0,"data-svelte-h":!0}),x(R)!=="svelte-107v8w3"&&(R.textContent=Ce),ee.forEach(P),fe=N(k),G=n(k,"DIV",{class:!0});var ae=O(G);Q=n(ae,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(Q)!=="svelte-jcslhj"&&(Q.textContent=be),ce=N(ae),c=n(ae,"SELECT",{id:!0});var W=O(c);q=n(W,"OPTION",{"data-svelte-h":!0}),x(q)!=="svelte-1k5nnv5"&&(q.textContent=Pe),M=n(W,"OPTION",{"data-svelte-h":!0}),x(M)!=="svelte-jrq3jp"&&(M.textContent=xe),V=n(W,"OPTION",{"data-svelte-h":!0}),x(V)!=="svelte-sho1kp"&&(V.textContent=Ie),B=n(W,"OPTION",{"data-svelte-h":!0}),x(B)!=="svelte-17vvu3p"&&(B.textContent=ge),A=n(W,"OPTION",{"data-svelte-h":!0}),x(A)!=="svelte-1w5od9t"&&(A.textContent=Ne),J=n(W,"OPTION",{"data-svelte-h":!0}),x(J)!=="svelte-m06p99"&&(J.textContent=Ee),z=n(W,"OPTION",{"data-svelte-h":!0}),x(z)!=="svelte-alg89"&&(z.textContent=Oe),H=n(W,"OPTION",{"data-svelte-h":!0}),x(H)!=="svelte-1qasg65"&&(H.textContent=ye),W.forEach(P),ae.forEach(P),ve=N(k),U=n(k,"BUTTON",{type:!0,class:!0});var je=O(U);le=X(je,te),je.forEach(P),de=N(k),K=n(k,"P",{class:!0,"data-svelte-h":!0}),x(K)!=="svelte-1jid0e7"&&(K.textContent=Te),k.forEach(P),i.forEach(P),this.h()},h(){o(l,"class","header svelte-9p6x64"),o(r,"class","queue-status svelte-9p6x64"),o(L,"for","name"),o(L,"class","svelte-9p6x64"),o(f,"type","text"),o(f,"id","name"),f.required=!0,f.disabled=s[4],o(f,"placeholder","Enter your name"),o(f,"class","svelte-9p6x64"),o(w,"class","form-group svelte-9p6x64"),o(Y,"for","phone"),o(Y,"class","svelte-9p6x64"),o(I,"type","tel"),o(I,"id","phone"),I.value=s[3],I.required=!0,I.disabled=s[4],o(I,"placeholder","(123) 456-7890"),o(I,"class","svelte-9p6x64"),o(R,"class","help-text svelte-9p6x64"),o(j,"class","form-group svelte-9p6x64"),o(Q,"for","party-size"),o(Q,"class","svelte-9p6x64"),q.__value="1",D(q,q.__value),M.__value="2",D(M,M.__value),V.__value="3",D(V,V.__value),B.__value="4",D(B,B.__value),A.__value="5",D(A,A.__value),J.__value="6",D(J,J.__value),z.__value="7",D(z,z.__value),H.__value="8",D(H,H.__value),o(c,"id","party-size"),c.disabled=s[4],s[0]===void 0&&Be(()=>s[11].call(c)),o(G,"class","form-group svelte-9p6x64"),o(U,"type","submit"),U.disabled=s[4],o(U,"class","svelte-9p6x64"),o(K,"class","terms svelte-9p6x64"),o(h,"class","waitlist-form svelte-9p6x64"),o(t,"class","svelte-9p6x64")},m(u,i){_e(u,t,i),e(t,l),e(t,v),e(t,r),e(r,p),e(p,y),e(p,d),e(p,m),e(t,T),C&&C.m(t,null),e(t,$),b&&b.m(t,null),e(t,F),e(t,h),e(h,w),e(w,L),e(w,g),e(w,f),D(f,s[2]),e(h,ie),e(h,j),e(j,Y),e(j,ue),e(j,I),e(j,pe),e(j,R),e(h,fe),e(h,G),e(G,Q),e(G,ce),e(G,c),e(c,q),e(c,M),e(c,V),e(c,B),e(c,A),e(c,J),e(c,z),e(c,H),De(c,s[0],!0),e(h,ve),e(h,U),e(U,le),e(h,de),e(h,K),he||(we=[oe(f,"input",s[10]),oe(I,"input",s[8]),oe(c,"change",s[11]),oe(h,"submit",s[9])],he=!0)},p(u,[i]){i&2&&re(d,u[1]),u[6]?C?C.p(u,i):(C=Se(u),C.c(),C.m(t,$)):C&&(C.d(1),C=null),u[5]?b?b.p(u,i):(b=qe(u),b.c(),b.m(t,F)):b&&(b.d(1),b=null),i&16&&(f.disabled=u[4]),i&4&&f.value!==u[2]&&D(f,u[2]),i&8&&I.value!==u[3]&&(I.value=u[3]),i&16&&(I.disabled=u[4]),i&16&&(c.disabled=u[4]),i&1&&De(c,u[0]),i&16&&te!==(te=u[4]?"JOINING...":"JOIN THE LINE NOW")&&re(le,te),i&16&&(U.disabled=u[4])},i:ke,o:ke,d(u){u&&P(t),C&&C.d(),b&&b.d(),he=!1,Ve(we)}}}function We(s){const t=s.replace(/\D/g,"");return t.length>=10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`:t}function Fe(s){return s.replace(/\D/g,"").length===10}function Ye(s,t,l){let _="4",v=0,r="",p="",y=!1,d=null,m=null,T=null;function $(S){const g=S.target,f=We(g.value);l(3,p=f)}Ae(async()=>{await F(),setInterval(F,3e4)});async function F(){try{const g=await(await fetch("/api/waitlist")).json();g.count!==void 0&&l(1,v=g.count)}catch(S){console.error("Error fetching queue count:",S)}}async function h(S){if(S.preventDefault(),l(5,d=null),l(6,m=null),!Fe(p)){l(5,d="Please enter a valid 10-digit phone number");return}l(4,y=!0);try{const g=await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,phone:p.replace(/\D/g,""),partySize:_})}),f=await g.json();g.ok?(l(6,m=!0),l(7,T=f.position),l(2,r=""),l(3,p=""),l(0,_="4"),await F()):l(5,d=f.error||"Failed to join the waitlist")}catch(g){l(5,d="Failed to connect to the server"),console.error("Error submitting form:",g)}l(4,y=!1)}function w(){r=this.value,l(2,r)}function L(){_=He(this),l(0,_)}return[_,v,r,p,y,d,m,T,$,h,w,L]}class Re extends Je{constructor(t){super(),ze(this,t,Ye,Ue,Me,{})}}export{Re as component};
