{"version":3,"file":"db-DiPfE1r4.js","sources":["../../../.svelte-kit/adapter-node/chunks/db.js"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\nconst supabase = createClient(\n  \"https://ooflqhegcrfeqodkfkym.supabase.co\",\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vZmxxaGVnY3JmZXFvZGtma3ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2NzU0NjgsImV4cCI6MjA1ODI1MTQ2OH0.0j1_G_8ZYJY38RuBojo2VhacZxkmYgntXFIx7h9_Dgo\"\n);\nasync function addToWaitlist(name, phone, partySize) {\n  try {\n    const { data, error } = await supabase.from(\"waitlist\").insert([\n      {\n        name,\n        phone,\n        party_size: partySize,\n        status: \"waiting\"\n      }\n    ]).select().single();\n    if (error) throw error;\n    console.log(\"Added to waitlist:\", data);\n    return data;\n  } catch (error) {\n    console.error(\"Error adding to waitlist:\", error);\n    throw error;\n  }\n}\nasync function getWaitlist() {\n  try {\n    const { data, error } = await supabase.from(\"waitlist\").select(\"*\").order(\"status\", { ascending: true }).order(\"created_at\", { ascending: false });\n    if (error) throw error;\n    console.log(\"Retrieved waitlist entries:\", data.length);\n    return data;\n  } catch (error) {\n    console.error(\"Error getting waitlist:\", error);\n    throw error;\n  }\n}\nasync function getQueuePosition(id) {\n  try {\n    const { data: entry, error: entryError } = await supabase.from(\"waitlist\").select(\"created_at\").eq(\"id\", id).single();\n    if (entryError) throw entryError;\n    const { count, error: countError } = await supabase.from(\"waitlist\").select(\"*\", { count: \"exact\", head: true }).eq(\"status\", \"waiting\").lt(\"created_at\", entry.created_at);\n    if (countError) throw countError;\n    console.log(\"Queue position for ID\", id, \":\", count);\n    return { position: count };\n  } catch (error) {\n    console.error(\"Error getting queue position:\", error);\n    throw error;\n  }\n}\nasync function getCurrentPartiesCount() {\n  try {\n    const { count, error } = await supabase.from(\"waitlist\").select(\"*\", { count: \"exact\", head: true }).eq(\"status\", \"waiting\");\n    if (error) throw error;\n    console.log(\"Current waiting parties:\", count);\n    return count;\n  } catch (error) {\n    console.error(\"Error getting current parties count:\", error);\n    return 0;\n  }\n}\nasync function removeFromWaitlist(id) {\n  try {\n    const { data, error } = await supabase.from(\"waitlist\").update({ status: \"completed\" }).eq(\"id\", id).select().single();\n    if (error) throw error;\n    console.log(\"Removed from waitlist:\", data);\n    return data;\n  } catch (error) {\n    console.error(\"Error removing from waitlist:\", error);\n    throw error;\n  }\n}\nasync function getDatabaseStatus() {\n  try {\n    const { count, error } = await supabase.from(\"waitlist\").select(\"*\", { count: \"exact\", head: true });\n    if (error) throw error;\n    return {\n      status: \"connected\",\n      tables: [\"waitlist\"],\n      counts: { waitlist: count },\n      timestamp: (/* @__PURE__ */ new Date()).toISOString()\n    };\n  } catch (error) {\n    console.error(\"Error getting database status:\", error);\n    return {\n      status: \"error\",\n      error: error.message,\n      timestamp: (/* @__PURE__ */ new Date()).toISOString()\n    };\n  }\n}\nexport {\n  addToWaitlist as a,\n  getCurrentPartiesCount as b,\n  getWaitlist as c,\n  getDatabaseStatus as d,\n  getQueuePosition as g,\n  removeFromWaitlist as r\n};\n"],"names":[],"mappings":"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"}